<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>iOS SDK: Model Validation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">iOS SDK
   &#160;<span id="projectnumber">3.0.1.95469</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">iOS Mobile SDK</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Model Validation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The SDK leverages Apple's Core Data framework for maintaining consistency of its models and persisting them to disk. In general this usage of Core Data is hidden from view and the user need not be concerned with it, but it becomes directly relevant if model validations fail for any session or account.</p>
<p>An <a class="el" href="interface_a_s_account.html">ASAccount</a> instance is invalid if:</p>
<ul>
<li>any of its attributes are nil</li>
<li>its ssh port, udp port or encryption cipher are set to a number less than 0</li>
</ul>
<p>An <a class="el" href="interface_a_s_fasp_session.html">ASFaspSession</a> instance is invalid if:</p>
<ul>
<li>at least one of the attributes uuid, files, createpath, pathmtu, or token are nil</li>
</ul>
<p>All <a class="el" href="interface_a_s_transfer_queue.html">ASTransferQueue</a> methods that act on sessions and accounts validate the instances they are passed before acting on them. If validation fails these methods log an error and raise an exception (!). If you are populating session or account properties with user input, or other possibly invalid input, you should validate these objects before attempting to use them. You can so by invoking the 'validate' method on these objects, shown here on an account:</p>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line"></div>
<div class="line">NSError *err = nil;</div>
<div class="line"><span class="keywordflow">if</span> (![account validate:&amp;err]) {</div>
<div class="line">    <span class="comment">// Handle error </span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"> }</div>
</div><!-- fragment --></dd></dl>
<p>see <a class="el" href="interface_a_s_account.html#a08eb730cc797a6b78c2dc5979c57489a">validate: (ASAccount)</a> and <a class="el" href="interface_a_s_fasp_session.html#a6f7137419e423bc0d9787ca111067eca">validate: (ASFaspSession)</a> for more information</p>
<h1><a class="anchor" id="core-data-errors"></a>
Core Data Validation Errors</h1>
<p>The error returned from validate: is an unmodified Core Data error.These errors always have the domain NSCocoaErrorDomain and contain one of the error codes described in Apple's <a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Miscellaneous/CoreData_Constants/Reference/reference.html" target="_blank">Core Data Constants Reference</a> under 'Validation Error Codes'.</p>
<h1><a class="anchor" id="validation-is-global"></a>
Validation is Global to a Thread</h1>
<p>Validation always occurs for all sessions and accounts of a given thread <b>at the same time</b>.</p>
<p>Whenever you perform an action that requires validating a model (such as enqueuing a session) all sessions or accounts that have been modified on the same thread will be validated at the same time.</p>
<p>Because of this fact it is strongly suggested that you do not leave unvalidated or invalid objects "lying around" - when you modify an account or a session, validate it, and if validation fails, handle the failure then and there, otherwise the invalid object might cause an exception to be raised when an otherwise unrelated action is initiated.</p>
<h1><a class="anchor" id="handling-validation-errors"></a>
Handling Validation Errors</h1>
<p>The best way to handle validation errors will vary from application to application, depending among other things on the source of the invalid input. Ultimately however it is imperative that the invalid object be forced into a valid state. The simplest way to do so is to refresh the object, causing all changes to be discarded and returning the object to its last valid state (see <a class="el" href="interface_a_s_account.html#ac844140a72bb23dd815d6d2e3cb4e527">refresh (ASAccount)</a> and <a class="el" href="interface_a_s_fasp_session.html#a37da31cd0b0fd4dbd55ec273a3287841">refresh (ASFaspSession)</a>)</p>
<h1><a class="anchor" id="deleting-objects"></a>
Deleting Accounts and Sessions</h1>
<p>Model validation also occurs when sessions or accounts are deleted. Again, validation errors will cause an error to be logged and an exception to be raised.</p>
<p>Sessions should only be deleted if they are inactive and not enqueued. Deleting a session that is active or enqueued will not result in an immediate exception but may cause undesired behavior.</p>
<p>Attempting to delete an account that is referenced by any existent sessions will cause a validation error. In order to avoid such a situation use <a class="el" href="interface_a_s_account.html#abf2214ff63004aa904fa976ccd0e498f">validateForDelete: (ASAccount)</a> to check if an account can be deleted before attempting to do so. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 4 2014 10:34:17 for iOS SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>

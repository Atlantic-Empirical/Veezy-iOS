<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>iOS SDK: Multi-Threaded Environments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">iOS SDK
   &#160;<span id="projectnumber">3.0.1.95469</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">iOS Mobile SDK</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Multi-Threaded Environments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Aspera Mobile SDK for iOS is thread-safe when used correctly. <a class="el" href="interface_a_s_transfer_queue.html">ASTransferQueue</a> methods are thread-safe except where otherwise noted. Several notes pertaining to the thread safety of <a class="el" href="interface_a_s_account.html">ASAccount</a> and <a class="el" href="interface_a_s_fasp_session.html">ASFaspSession</a> instances are noted here.</p>
<h1><a class="anchor" id="models-one-per-instance"></a>
Models: One Instance Per Thread</h1>
<p>In order to guarantee thread safety when dealing with model objects such as <a class="el" href="interface_a_s_account.html">ASAccount</a> and <a class="el" href="interface_a_s_fasp_session.html">ASFaspSession</a> instances, the SDK maintains a separate instance for each thread that needs to interact with any given session or account - that is to say, there may be multiple instances of <a class="el" href="interface_a_s_account.html">ASAccount</a> representing any one given account, one per thread (and the same goes for <a class="el" href="interface_a_s_fasp_session.html">ASFaspSession</a>). This has several implications which are detailed in the remainder of this page.</p>
<h1><a class="anchor" id="passing-objects-across-threads"></a>
Passing Instances Between Threads</h1>
<p>One should avoid passing account or session instances between threads. This is an important point, so it will be repeated: do not pass account or session instances between threads.</p>
<p>In order to work around this limitation, you can pass the "object ID" of a particular account or session between threads, and then use that object ID to retrieve the correct instance for the thread you are in. Object IDs may be retrieved via the method objectID:</p>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line">NSManagedObjectID *objID = [account objectID];</div>
</div><!-- fragment --></dd></dl>
<p>You can then pass this object ID to another thread, and use it to retrieve an <a class="el" href="interface_a_s_account.html">ASAccount</a> instance representing the same account in this other thread:</p>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line"><span class="comment">// In another thread, having in some</span></div>
<div class="line"><span class="comment">// fashion received objID</span></div>
<div class="line"><a class="code" href="interface_a_s_account.html">ASAccount</a> *account = [<a class="code" href="interface_a_s_account.html">ASAccount</a> <a class="code" href="interface_a_s_account.html#aeb84fbd5a95d986adf58b9b103e86a88">accountWithID</a>:objID];</div>
</div><!-- fragment --></dd></dl>
<p>Similar code can be used with <a class="el" href="interface_a_s_fasp_session.html">ASFaspSession</a> instances.</p>
<h1><a class="anchor" id="refreshing-models"></a>
Refreshing Models with Changes From Other Threads</h1>
<p>If a model instance is changed in a particular thread, those changes may not be reflected in the instances that represent that same model object in other threads. Most API methods are guaranteed to return up-to-date model objects, but under some circumstances it may be necessary to force an instance to load the latest changes made to the object in any other threads. This may be done by invoking the refresh method on that object, see <a class="el" href="interface_a_s_account.html#ac844140a72bb23dd815d6d2e3cb4e527">refresh (ASAccount)</a> and <a class="el" href="interface_a_s_fasp_session.html#a37da31cd0b0fd4dbd55ec273a3287841">refresh (ASFaspSession)</a>.</p>
<p>It is important to note that refreshing a model instance discards any unsaved changes to that model made in the calling thread.</p>
<h1><a class="anchor" id="saving-models"></a>
Saving Changes From a Particular Thread</h1>
<p>Changes made to session or account instances hold only in the thread in which they were made. To cause the changes to propagate to other threads the instances must be saved.</p>
<p>Most <a class="el" href="interface_a_s_transfer_queue.html">ASTransferQueue</a> methods that act on sessions and accounts save the objects they are passed, so the user need not be bothered with this task. If however you modify a session or account outside of the context of these classes you will need to save the changes yourself. You may do this by invoking ASFaspSession::save or <a class="el" href="interface_a_s_account.html#ab3c158c441657fa71e902192bdb83b8f">save (ASAccount)</a>, but note that these methods raise an exception if the object is not valid, therefore you should validate the object before saving - see <a class="el" href="model-validation.html">Model Validation</a> for more information. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 4 2014 10:34:17 for iOS SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
